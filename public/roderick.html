<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>INTERSTELLAR PACKAGES</title>

  <!-- Stripe (before CSS) -->
  <script src="https://js.stripe.com/v3/"></script>

  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/loading-styles.css">
  <link rel="stylesheet" href="/css/additional-styles.css">
  <link rel="stylesheet" href="/css/header-system.css">
</head>

<body data-math="on">
  <!-- HEADER (now with ID hooks, classes unchanged) -->
  <header class="header-system" id="artistHeader">
    <div class="Logo header-logo" id="brandLogo">
      <img src="/images/IP_TAG24.svg" alt="Interstellar Packages Logo">
    </div>

    <!-- Artist Name Container -->
    <div class="artist-name-container" id="pageCrumbs">
      <span id="artist-name" class="artist-name">Loading...</span>
    </div>

    <!-- Spacer -->
    <div class="header-spacer"></div>

    <nav class="Nav header-nav" id="topNav">
      <ul>
        <li><a href="filmography.html">Film</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li class="loginSquare">
          <button id="loginBtn" class="login-button">Log In</button>
        </li>
        <li id="userInfo" class="user-info" style="display: none;">
          <span id="userName"></span>
          <button id="logoutBtn" class="logout-button">Logout</button>
        </li>
        <li class="cartSquare">
          <button id="cartBtn" class="cart-button">
            <img src="/images/IP-CART25-m1.svg" alt="Shopping Cart" class="cart-icon">
            <span id="cartCount" class="cart-count" style="display: none;">0</span>
          </button>
        </li>
      </ul>
    </nav>
  </header>

  <!-- MAIN (split into albums/info with ID hooks for math engine) -->
  <main id="artistMain">
    <div class="album-art" id="albumsRegion">
      <div id="albumGrid"><!-- album grid content inserted by your JS --></div>
    </div>

    <aside class="sidebar" id="infoRegion">
      <details class="sidebar-details" open>
        <summary>Album Details</summary>
        <div class="sidebar-content" id="albumInfo"><!-- injected by API --></div>
        <div id="songList"></div>
      </details>
    </aside>
  </main>

  <!-- FOOTER (acts as controls region; player container gets an ID) -->
  <footer id="artistControls">
    <details class="footer-details" open>
      <summary>Player</summary>
      <div class="foot-cont">
        <div class="player" id="playerControls"><!-- player injected here --></div>
        <p class="footTag">&copy; 2024/25 RDXENV</p>
      </div>
    </details>
  </footer>

  <!-- interstellar system -->
  <script type="module" src="/js/InterstellarSystem.js"></script>

  <!-- main -->
  <script type="module" src="/js/main.js"></script>

  <!-- Load API client first as an ESM module -->
  <script type="module" src="/js/api-client.js"></script>
  <!-- Load UI manager and main as ESM modules -->
  <script type="module" src="/js/ui-manager.js"></script>

  <!-- Load other scripts that depend on global objects (non-module) -->
  <script src="/js/auth.js"></script>
  <script src="/js/cart.js"></script>
  <script src="/js/player.js"></script>
  <script type="module" src="/js/header.js"></script>

  <!-- Math-first artist controller (new) -->
  <script type="module" src="/js/artist.js"></script>

  <!-- Overlays (present but hidden until wired) -->
  <section id="playerOverlay" aria-hidden="true"></section>
  <section id="userOverlay" aria-hidden="true"></section>

  <!-- Auth Modal (unchanged) -->
  <div id="authModal" class="auth-modal">
    <div class="auth-modal-content">
      <span class="close"></span>

      <!-- Login Form -->
      <div id="loginForm" class="auth-form-container">
        <h2>Log In</h2>
        <div id="loginError" class="auth-error" style="display: none;"></div>
        <form class="auth-form" id="loginFormElement">
          <input type="email" id="loginEmail" placeholder="Email" required>
          <div class="password-input-container">
            <input type="password" id="loginPassword" placeholder="Password" required>
            <div class="password-toggle-icon" data-target="loginPassword"></div>
          </div>
          <button type="submit" id="loginSubmit">Log In</button>
        </form>
        <div class="form-toggle">
          Don't have an account? <a id="showRegister">Create one</a>
        </div>
      </div>

      <!-- Register Form -->
      <div id="registerForm" class="auth-form-container" style="display: none;">
        <h2>Create Account</h2>
        <div id="registerError" class="auth-error" style="display: none;"></div>
        <div id="registerSuccess" class="auth-success" style="display: none;"></div>
        <form class="auth-form" id="registerFormElement">
          <input type="text" id="registerUsername" placeholder="Username" required>
          <input type="text" id="registerFirstName" placeholder="First Name">
          <input type="text" id="registerLastName" placeholder="Last Name">
          <input type="email" id="registerEmail" placeholder="Email" required>
          <div class="password-input-container">
            <input type="password" id="registerPassword" placeholder="Password (min 6 characters)" required>
            <div class="password-toggle-icon" data-target="registerPassword"></div>
          </div>
          <button type="submit" id="registerSubmit">Create Account</button>
        </form>
        <div class="form-toggle">
          Already have an account? <a id="showLogin">Log in</a>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
